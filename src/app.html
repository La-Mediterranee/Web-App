<!DOCTYPE html>
<html lang="de">
	<head>
		<!-- 
			if your looking for more info about this page
			than go to https://github.com/La-Mediterranee/Web-App
			where you can find the source code and the docs/comments
			and the reasons for why I/we did what we did
		-->
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="aliceblue" />
		<meta name="color-scheme" content="normal" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />

		<link rel="preconnect" href="https://fonts.gstatic.com" />
		<link rel="dns-prefetch" href="https://fonts.gstatic.com" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="dns-prefetch" href="https://fonts.googleapis.com" />

		<link rel="preconnect" href="https://www.googletagmanager.com" />
		<link rel="dns-prefetch" href="https://www.googletagmanager.com" />

		<link rel="icon" href="/favicon.ico" crossorigin="" />
		<link rel="manifest" href="/site.webmanifest" crossorigin="" />
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;800&display=swap"
		/>

		<script>
			function hasIntlGetCanonicalLocalesBug() {
				try {
					return (
						new Intl.Locale('und-x-private').toString() ===
						'x-private'
					);
				} catch (e) {
					return true;
				}
			}

			const polyfills = [];

			if (!('AbortController' in window)) {
				polyfills.push('AbortController');
			}

			if (
				!(
					'IntersectionObserver' in window &&
					'IntersectionObserverEntry' in window &&
					'intersectionRatio' in
						window.IntersectionObserverEntry.prototype
				)
			) {
				polyfills.push('IntersectionObserver');
			}

			if (!('Locale' in Intl) || hasIntlGetCanonicalLocalesBug()) {
				polyfills.push('Intl.Locale');
			}

			if (polyfills.length > 0) {
				const src = `https://polyfill.io/v3/polyfill.min.js?features=${polyfills.join(
					'%2C'
				)}`;
				const script = document.createElement('script');
				script.src = src;
				document.head.appendChild(script);
			}
		</script>

		<script type="module">
			navigator.serviceWorker
				.register('/service-worker.js')
				.then((reg) => {
					reg.installing; // the installing worker, or undefined
					reg.waiting; // the waiting worker, or undefined
					reg.active; // the active worker, or undefined

					reg.addEventListener('updatefound', () => {
						// A wild service worker has appeared in reg.installing!
						const newWorker = reg.installing;

						newWorker.state;
						// "installing" - the install event has fired, but not yet complete
						// "installed"  - install complete
						// "activating" - the activate event has fired, but not yet complete
						// "activated"  - fully active
						// "redundant"  - discarded. Either failed install, or it's been
						//                replaced by a newer version

						newWorker.addEventListener('statechange', () => {
							// newWorker.state has changed
						});
					});
				});

			navigator.serviceWorker.addEventListener('controllerchange', () => {
				// This fires when the service worker controlling this page
				// changes, eg a new worker has skipped waiting and become
				// the new active worker.
			});
		</script>
		<!-- You can remove this is you don't want to make your PWA installable -->
		<!-- <script type="module" src="https://cdn.jsdelivr.net/npm/@pwabuilder/pwainstall"></script> -->
		%svelte.head%
	</head>
	<body>
		<div id="svelte">%svelte.body%</div>
		<!-- <script defer async src="https://js.stripe.com/v3/"></script>
		<script
			defer
			async
			src="https://www.googletagmanager.com/gtag/js?id="
		></script> -->
	</body>
</html>
